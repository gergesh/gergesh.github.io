<!DOCTYPE html>
<html>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <style type="text/css">
        body {
            margin: 40px auto;
            max-width: 650px;
            line-height: 1.6;
            font-size:18px;
            color:#444;
            padding:0 10px
        }
    </style>
    <title>hashamen</title>
    <body>
        <script src="punycode.js"></script>
        <script>
            let name = /(([^.]+)\.)?hasha.men/.exec(window.location.host)[2];
            let content = document.createElement('p');
            content.style.whiteSpace = 'pre';
            if (name === undefined) {
                content.innerHTML = 'Try a subdomain, <a href="https://ben.hasha.men">ben.hasha.men</a> is a good choice.';
            } else {
                const params = new URL(document.URL);
                if (name.startsWith('xn--')) {
                    name = punycode.decode(name.slice(4));
                    const place = params.searchParams.get('place') || 'בטן';
                    content.dir = 'rtl';
                    content.textContent = `${name} השמן
ב${place} יש לו בן
איך קוראים לבן?
${name} השמן`;
                } else {
                    const place = params.searchParams.get('place') || 'beten';
                    content.textContent = `${name} hashamen
ba${place} yesh lo ben.
eich korim laben?
${name} hashamen.`;
                }
            }
            document.body.appendChild(content);
            document.title = content.textContent.slice(0 ,content.textContent.indexOf('\n'));
        </script>
        <noscript>
            <p>
            I know it hurts, but you'll have to enable javascript for this experience
            </p>
        </noscript>
    </body>
</html>
